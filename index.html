<!DOCTYPE html>
<html>
  <head>
    <title>Interactive Political Map</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #map {
        height: 85vh;
      }
      #controls {
        height: 15vh;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        background: #f2f2f2;
        border-bottom: 1px solid #ccc;
        padding: 10px;
      }
      .politician-icon {
        border-radius: 50%;
        overflow: hidden;
        border: 2px solid #333;
        transition: transform 0.2s;
      }
      .politician-icon img {
        width: 100%;
        height: 130%;
        object-fit: cover;
        object-position: top center;
      }
      input,
      button {
        padding: 6px 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
      }
      button {
        background: #0077ff;
        color: white;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background: #005bcc;
      }
    </style>
  </head>
  <body>
    <div id="controls">
      <input type="text" id="nameInput" placeholder="نام سیاستمدار" />
      <input type="text" id="imgInput" placeholder="لینک عکس (URL)" />
      <button onclick="addPoliticianFromForm()">➕ اضافه کن</button>
    </div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
      var map = L.map("map").setView([20, 0], 2);

      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "© OpenStreetMap contributors",
      }).addTo(map);

      var politicianMarkers = [];

      function createPoliticianIcon(imageUrl, zoomLevel, name) {
        let size = zoomLevel * 8 + 8;
        return L.divIcon({
          html: `<div class="politician-icon" style="width:${size}px;height:${size}px;" title="${name}">
               <img src="${imageUrl}" />
             </div>`,
          className: "",
          iconSize: [size, size],
        });
      }

      function addPolitician(
        lat = 30,
        lng = 50,
        name = "بدون نام",
        imageUrl = "https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png"
      ) {
        var marker = L.marker([lat, lng], {
          icon: createPoliticianIcon(imageUrl, map.getZoom(), name),
          draggable: true,
        }).addTo(map);

        marker.bindPopup(`<b>${name}</b>`); // نمایش نام در popup
        politicianMarkers.push({
          marker: marker,
          imageUrl: imageUrl,
          name: name,
        });
      }

      // اضافه کردن سیاستمدار از فرم
      function addPoliticianFromForm() {
        let name = document.getElementById("nameInput").value || "بدون نام";
        let img =
          document.getElementById("imgInput").value ||
          "https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png";
        addPolitician(20, 0, name, img);
        document.getElementById("nameInput").value = "";
        document.getElementById("imgInput").value = "";
      }

      // تغییر اندازه آواتارها با زوم
      map.on("zoom", function () {
        let zoomLevel = map.getZoom();
        politicianMarkers.forEach((p) => {
          p.marker.setIcon(createPoliticianIcon(p.imageUrl, zoomLevel, p.name));
        });
      });
    </script>
    <script>
      // لیست اولیه از سیاستمداران
      var initialPoliticians = [
        {
          name: "Donald Trump",
          lat: 38.9,
          lng: -77.03,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Official_Presidential_Portrait_of_President_Donald_J._Trump_%282025%29.jpg/250px-Official_Presidential_Portrait_of_President_Donald_J._Trump_%282025%29.jpg",
        },
        {
          name: "Friedrich Merz",
          lat: 52.52,
          lng: 13.4,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/2024-08-21_Friedrich_Merz_in_Erfurt_2024_STP_3041_by_Stepro_%283x4_cropped%29.jpg/250px-2024-08-21_Friedrich_Merz_in_Erfurt_2024_STP_3041_by_Stepro_%283x4_cropped%29.jpg",
        },
        {
          name: "Xi Jinping",
          lat: 39.9,
          lng: 116.4,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/Xi_Jinping_in_Beijing_on_May_13%2C_2025_%28cropped%29.jpg/250px-Xi_Jinping_in_Beijing_on_May_13%2C_2025_%28cropped%29.jpg",
        },
        {
          name: "Vladimir Putin",
          lat: 55.7,
          lng: 37.6,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/%D0%92%D0%BB%D0%B0%D0%B4%D0%B8%D0%BC%D0%B8%D1%80_%D0%9F%D1%83%D1%82%D0%B8%D0%BD_%2808-03-2024%29_%28cropped%29_%28higher_res%29.jpg/250px-%D0%92%D0%BB%D0%B0%D0%B4%D0%B8%D0%BC%D0%B8%D1%80_%D0%9F%D1%83%D1%82%D0%B8%D0%BD_%2808-03-2024%29_%28cropped%29_%28higher_res%29.jpg",
        },
        {
          name: "Narendra Modi",
          lat: 28.7,
          lng: 77.1,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Shri_Narendra_Modi%2C_Prime_Minister_of_India_%283x4_cropped%29.jpg/250px-Shri_Narendra_Modi%2C_Prime_Minister_of_India_%283x4_cropped%29.jpg",
        },
        {
          name: "Emmanuel Macron",
          lat: 48.8,
          lng: 2.3,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/Emmanuel_Macron_-_June_2025_%283x4_cropped%29.jpg/250px-Emmanuel_Macron_-_June_2025_%283x4_cropped%29.jpg",
        },
        {
          name: "Keir Starmer",
          lat: 51.5,
          lng: 0.1,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Prime_Minister_Sir_Keir_Starmer_Official_Portrait_%28cropped%29.jpg/250px-Prime_Minister_Sir_Keir_Starmer_Official_Portrait_%28cropped%29.jpg",
        },
        {
          name: "Recep Tayyip Erdogan",
          lat: 39.9,
          lng: 32.8,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Turkish_President_Recep_Tayyip_Erdo%C4%9Fan_in_January_2024_%28cropped%29.jpg/250px-Turkish_President_Recep_Tayyip_Erdo%C4%9Fan_in_January_2024_%28cropped%29.jpg",
        },
        {
          name: "Mohammed bin Salman",
          lat: 24.7,
          lng: 46.6,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/%D8%A7%D9%84%D8%B5%D9%88%D8%B1%D8%A9_%D8%A7%D9%84%D8%B1%D8%B3%D9%85%D9%8A%D8%A9_%D9%84%D9%84%D8%A3%D9%85%D9%8A%D8%B1_%D9%85%D8%AD%D9%85%D8%AF_%D8%A8%D9%86_%D8%B3%D9%84%D9%85%D8%A7%D9%86_%D8%A8%D9%86_%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D8%B9%D8%B2%D9%8A%D8%B2_%D8%A2%D9%84_%D8%B3%D8%B9%D9%88%D8%AF_%28%D9%85%D9%82%D8%B5%D9%88%D8%B5%D8%A9%29.jpg/250px-%D8%A7%D9%84%D8%B5%D9%88%D8%B1%D8%A9_%D8%A7%D9%84%D8%B1%D8%B3%D9%85%D9%8A%D8%A9_%D9%84%D9%84%D8%A3%D9%85%D9%8A%D8%B1_%D9%85%D8%AD%D9%85%D8%AF_%D8%A8%D9%86_%D8%B3%D9%84%D9%85%D8%A7%D9%86_%D8%A8%D9%86_%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D8%B9%D8%B2%D9%8A%D8%B2_%D8%A2%D9%84_%D8%B3%D8%B9%D9%88%D8%AF_%28%D9%85%D9%82%D8%B5%D9%88%D8%B5%D8%A9%29.jpg",
        },
        {
          name: "Benjamin Netanyahu",
          lat: 32.1,
          lng: 34.7,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/Benjamin_Netanyahu%2C_February_2023.jpg/250px-Benjamin_Netanyahu%2C_February_2023.jpg",
        },
        {
          name: "Seyyed Ali Khamenei",
          lat: 35.7,
          lng: 51.3,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Ali_Khamenei_2025_%283x4_cropped%29.jpg/250px-Ali_Khamenei_2025_%283x4_cropped%29.jpg",
        },
        {
          name: "Kim Jong Un",
          lat: 39.1,
          lng: 125.8,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6e/Kim_Jong-un_April_2019_%28cropped%29.jpg/250px-Kim_Jong-un_April_2019_%28cropped%29.jpg",
        },
        {
          name: "Volodymyr Zelenskyy",
          lat: 50.4,
          lng: 30.5,
          imageUrl:
            "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Volodymyr_Zelenskyy_in_2022.jpg/250px-Volodymyr_Zelenskyy_in_2022.jpg",
        },
      ];

      // وقتی نقشه لود شد → سیاستمدارها رو اضافه کن
      initialPoliticians.forEach((p) => {
        addPolitician(p.lat, p.lng, p.name, p.imageUrl);
      });
    </script>
  </body>
</html>
